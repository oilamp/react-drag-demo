{"version":3,"sources":["components/Tools/text.svg","pages/App/logo.svg","utils/context.js","utils/reducer.js","components/ComponentItem/index.js","plugins/Text/index.js","plugins/index.js","utils/util.js","plugins/pluginConfig.js","components/Tools/index.js","components/EditorShape/index.js","components/EditorPane/index.js","pages/App/index.js","serviceWorker.js","index.js"],"names":["module","exports","AppContext","createContext","AppReducer","state","action","type","els","el","filter","item","uuid","push","activeUUID","dragEl","Error","ComponentItem","props","dispatch","useContext","data","handleOnDrop","e","preventDefault","target","className","itemClick","document","removeEventListener","addEventListener","event","draggable","onDragStart","onDragEnd","onClick","src","icon","alt","title","defaultPorps","text","defaultStyle","height","EdText","config","this","React","Component","components","getPluginsClass","elName","createUUID","d","Date","getTime","window","performance","now","replace","c","r","Math","random","floor","toString","deepClone","obj","cache","hit","original","copy","Array","isArray","Object","keys","forEach","key","throttle","fn","delay","timer","args","slice","apply","arguments","setTimeout","elementConfig","name","animations","commonStyle","position","width","top","left","rotate","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","borderWidth","borderColor","borderStyle","borderRadius","boxShadow","fontSize","fontWeight","lineHeight","letterSpacing","textAlign","color","backgroundColor","backgroundImage","backgroundSize","opacity","zIndex","propsValue","value","valueType","componentList","textLogo","Tools","handleItemClick","elComponentData","getPluginProps","element","extendStyle","elementData","cloneDeep","dict","elementConfigData","needProps","merge","defaultValue","isForm","getElementConfig","length","map","pointList","directionKey","t","b","l","EditorShape","getPointStyle","point","pos","hasT","test","hasB","hasL","hasR","newLeft","newTop","cursor","split","reverse","m","join","shapeStyle","styleObj","scalingRatio","needUnitStr","style","includes","transform","getCommonStyle","stopPropagation","handleTopWrapperClick","onMouseDown","firstTime","startY","clientY","startX","clientX","startTop","startLeft","move","moveEvent","currX","currY","resize","up","handleMouseDownOnElement","downEvent","disY","disX","newHeight","newWidth","handleMouseDownOnPoint","children","EditorPane","find","useEffect","handleDelete","keyCode","CustomComponents","getPlugins","App","useReducer","Provider","logo","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","StrictMode","getElementById","URL","process","href","origin","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.2a640eea.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/text.ad0d6e3b.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import { createContext } from 'react';\nconst AppContext = createContext();\n\nexport default AppContext;\n","export default function AppReducer (state, action) {\n    switch (action.type) {\n        case 'els_add':\n            return {...state, els: [...state.els, action.el]};\n        case 'els_remove':\n            return {...state, els: state.els.filter(item => item.uuid !== action.uuid)};\n        case 'els_change':\n            const els = state.els.filter(item => item.uuid !== action.el.uuid);\n            els.push(action.el);\n            return {...state, els};\n        case 'els_clean':\n            return {...state, els: []};\n        case 'uuid_change': \n            return {...state, activeUUID: action.uuid};\n        case 'drag_el_change': \n            return {...state, dragEl: action.el};    \n        default:\n            throw new Error();\n    }\n}","import React, { useContext } from 'react';\nimport './ComponentItem.css';\nimport AppContext from '../../utils/context'\n\nexport default function ComponentItem (props) {\n  const {dispatch } = useContext(AppContext);\n  const { data } = props;\n\n  function handleOnDrop (e) {\n    e.preventDefault();\n    if (e.target.className === 'EditorPaneMain') {\n      props.itemClick(props.data);\n    }\n    document.removeEventListener('drop', handleOnDrop);\n  }\n\n  function handleOnDragStart (e) {\n    dispatch({ type: 'drag_el_change', el: data.item });\n    document.addEventListener('drop', handleOnDrop);\n  }\n\n  function handleOnDragEnd (e) {\n    dispatch({ type: 'drag_el_change', el: null });\n  }\n\n  document.addEventListener(\"dragover\", function(event) {\n    event.preventDefault();\n  });\n\n  return <div className=\"ComponentItem\" draggable=\"true\" onDragStart={handleOnDragStart} onDragEnd={handleOnDragEnd} onClick={() => props.itemClick(props.data)}>\n    <div className=\"ComponentItemWrap\">\n      <img className=\"ComponentIcon\" src={data.icon} alt=\"组件图标\"/>\n      <p className=\"ComponentTitle\">{data.title}</p>\n    </div>\n  </div>\n};\n","\nimport React from 'react';\n\nconst defaultPorps = {\n    text: '我是一段文字',\n    defaultStyle: { height: 40 }\n};\n\nclass EdText extends React.Component {\n    render() {\n        const config = this.props.config || defaultPorps;\n        return <div className=\"EdText EditorPlugin\">{config.text}</div>;\n    }\n}\n\nEdText.defaultPorps = defaultPorps;\nexport default EdText;","import React from 'react';\nimport Text from './Text';\n\nconst components = {\n    EdText: Text\n}\n\nexport function getPlugins (el) {\n    const CustomComponents = getPluginsClass(el.name);\n    return <CustomComponents config={el.propsValue}/>;\n}\n\nexport function getPluginsClass (elName) {\n    return components[elName];\n}\n\nexport function getPluginProps (elName) {\n    let elComponentData = getPluginsClass(elName);\n    if (!elComponentData) return {};\n    let props = {}\n    const { defaultPorps } = elComponentData;\n    for (let key in defaultPorps) {\n      props[key] = defaultPorps[key];\n    }\n    return props;\n  }","/**\n * 生成uuid方法\n * @returns {string}\n */\nexport const createUUID = function () {\n\tvar d = new Date().getTime();\n\tif (window.performance && typeof window.performance.now === \"function\") {\n\t\td += performance.now(); //use high-precision timer if available\n\t}\n\tvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\tvar r = (d + Math.random() * 16) % 16 | 0;\n\t\td = Math.floor(d / 16);\n\t\treturn (c === 'x' ? r : ((r & 0x3) | 0x8)).toString(16);\n\t});\n\treturn uuid;\n}\n\n/**\n * 深拷贝\n * @param {*} obj 拷贝对象(object or array)\n * @param {*} cache 缓存数组\n */\nexport const deepClone = function (obj, cache = []) {\n\t// typeof [] => 'object'\n\t// typeof {} => 'object'\n\tif (obj === null || typeof obj !== 'object') {\n\t\treturn obj\n\t}\n\t// 如果传入的对象与缓存的相等, 则递归结束, 这样防止循环\n\t/**\n\t * 类似下面这种\n\t * var a = {b:1}\n\t * a.c = a\n\t * 资料: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value\n\t */\n\tconst hit = cache.filter(c => c.original === obj)[0]\n\tif (hit) {\n\t\treturn hit.copy\n\t}\n\n\tconst copy = Array.isArray(obj) ? [] : {}\n\t// 将copy首先放入cache, 因为我们需要在递归deepCopy的时候引用它\n\tcache.push({\n\t\toriginal: obj,\n\t\tcopy\n\t})\n\tObject.keys(obj).forEach(key => {\n\t\tcopy[key] = deepClone(obj[key], cache)\n\t})\n\n\treturn copy\n}\n\nexport function throttle (fn, delay = 300) {\n\tlet timer = null;\n\treturn function () {\n\t\tif (timer) return;\n\t\tlet args = [].slice.apply(arguments);\n\t\tfn.apply(this, args);\n\t\ttimer = setTimeout(() => {\n\t\t\ttimer = null;\n\t\t}, delay);\n\t}\n}\n","import { createUUID, deepClone } from '../utils/util';\nimport { cloneDeep, merge } from \"lodash\";\n// 元素配置信息字段\nlet elementConfig = {\n\tname: '', // 组件名\n\tanimations: [], // 动画\n\tcommonStyle: {\n\t\tposition: 'absolute',\n\t\twidth: 960,\n\t\theight: 30,\n\t\ttop: 200,\n\t\tleft: 0,\n\t\trotate: 0,\n\t\tpaddingTop: 0,\n\t\tpaddingLeft: 0,\n\t\tpaddingRight: 0,\n\t\tpaddingBottom: 0,\n\t\tmarginTop: 0,\n\t\tmarginLeft: 0,\n\t\tmarginRight: 0,\n\t\tmarginBottom: 0,\n\t\tborderWidth: 0,\n\t\tborderColor: '',\n\t\tborderStyle: 'solid',\n\t\tborderRadius: 0,\n\t\tboxShadow: '',\n\t\tfontSize: 16,\n\t\tfontWeight: 500,\n\t\tlineHeight: 1.4,\n\t\tletterSpacing: 0,\n\t\ttextAlign: 'center',\n\t\tcolor: '#000000',\n\t\tbackgroundColor: '',\n\t\tbackgroundImage: '',\n\t\tbackgroundSize: 'cover',\n\t\topacity: 1,\n\t\tzIndex: 1\n\t}, // 公共样式\n\tdefaultPorps: {},\n\tpropsValue: {}, // 属性参数\n\tvalue: '', // 绑定值\n\tvalueType: 'String' // 值类型\n}\n\nexport function getElementConfig (element, extendStyle = {}) {\n\tlet elementData = cloneDeep(element)\n\tlet type = elementData.valueType || 'String' // 默认string类型\n\tlet dict = {\n\t\t'Sting': '',\n\t\t'Array': [],\n\t\t'Object': {},\n\t\t'Boolean': false,\n\t\t'Number': 0\n\t\t// 待扩展数据类型\n\t}\n\tlet elementConfigData = cloneDeep(elementConfig)\n\tlet config = {\n\t\tuuid: createUUID(),\n\t\t...elementConfigData,\n\t\tname: elementData.name,\n\t\tpropsValue: deepClone(elementData.needProps || {})\n\t}\n\t// 样式\n\tconfig.commonStyle = merge(config.commonStyle, elementData.defaultStyle)\n\tconfig.commonStyle = merge(config.commonStyle, extendStyle)\n\n\tconfig.value = element.defaultValue || dict[type];\n\tconfig.valueType = type;\n\tconfig.isForm = !!element.isForm;\n\treturn config;\n}\n\nexport function getCommonStyle (styleObj, scalingRatio = 1) {\n\tlet needUnitStr = ['width', 'height','top', 'left', 'paddingTop', 'paddingLeft', 'paddingRight', 'paddingBottom', 'marginTop', 'marginLeft', 'marginRight', 'marginBottom', 'borderWidth','fontSize', 'borderRadius', 'letterSpacing']\n\tlet style ={}\n\n\tfor (let key in styleObj){\n\t\tif(needUnitStr.includes(key)){\n\t\t\tstyle[key] = (styleObj[key] * scalingRatio) + 'px'\n\t\t}else{\n\t\t\tstyle[key] = styleObj[key]\n\t\t}\n\t}\n\tstyle.transform = `rotate(${style.rotate}deg)`\n\tstyle.backgroundImage = style.backgroundImage ? `url(${style.backgroundImage})` : '';\n\treturn style;\n}","import React, { useContext } from 'react';\nimport './Tools.css';\nimport AppContext from '../../utils/context';\nimport ComponentItem from '../ComponentItem';\nimport { getPluginProps } from '../../plugins';\nimport { getElementConfig } from '../../plugins/pluginConfig';\nimport textLogo from './text.svg';\n\nconst componentList = [\n  {\n    name: 'EdText',\n    title: '文字',\n    icon: textLogo\n  }\n];\n\nfunction Tools() {\n  const { state, dispatch } = useContext(AppContext);\n\n  function handleItemClick (item) {\n    let props = getPluginProps(item.name);\n    let el = getElementConfig({...item, needProps: props }, {zIndex: state.els.length + 1})\n    dispatch({type: 'uuid_change', uuid: el.uuid});\n    dispatch({ type: 'els_add', el });\n  }\n\n  return (\n    <div className=\"Tools\">\n      <h4>组件库</h4>\n      <div className=\"ComponentList\">{ componentList.map(item => <ComponentItem key={item.name} itemClick={handleItemClick} data={item}></ComponentItem>) }</div>\n    </div>\n  );\n}\n\nexport default Tools;\n","import React, { useContext } from 'react';\nimport AppContext from '../../utils/context'\nimport './EditorShape.css';\nimport { throttle } from '../../utils/util';\nimport { getCommonStyle } from '../../plugins/pluginConfig';\n\nconst pointList = ['lt', 'rt', 'lb', 'rb', 'l', 'r', 't', 'b'];\nconst directionKey = {\n  t: 'n',\n  b: 's',\n  l: 'w',\n  r: 'e'\n};\n\nfunction EditorShape(props) {\n  const { state, dispatch } = useContext(AppContext);\n\n  function getPointStyle (point) {\n    const pos = props.defaultStyle;\n    const height = pos.height;\n    const width = pos.width;\n    let hasT = /t/.test(point);\n    let hasB = /b/.test(point);\n    let hasL = /l/.test(point);\n    let hasR = /r/.test(point);\n    let newLeft = 0;\n    let newTop = 0;\n    if (point.length === 2) {\n      newLeft = hasL ? 0 : width;\n      newTop = hasT ? 0 : height;\n    } else {\n      if (hasT || hasB) {\n        newLeft = width / 2;\n        newTop = hasT ? 0 : height;\n      }\n      if (hasL || hasR) {\n        newLeft = hasL ? 0 : width;\n        newTop = height / 2 - 5;\n      }\n    }\n    const style = {\n      marginLeft: (hasL || hasR) ? '-5px' : 0,\n      marginTop: (hasT || hasB) ? '-5px' : 0,\n      left: `${newLeft}px`,\n      top: `${newTop}px`,\n      cursor: point.split('').reverse().map(m => directionKey[m]).join('') + '-resize'\n    }\n    return style;\n  }\n\n  function handleTopWrapperClick (e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  function handleMouseDownOnElement (e) {\n    dispatch({type: 'uuid_change', uuid: props.uuid});\n    const pos = {...props.defaultStyle};\n    let startY = e.clientY;\n    let startX = e.clientX;\n    let startTop = pos.top;\n    let startLeft = pos.left;\n    let firstTime='',lastTime='';\n    firstTime = new Date().getTime();\n    let move = throttle(moveEvent => {\n      moveEvent.stopPropagation();\n      moveEvent.preventDefault();\n\n      let currX = moveEvent.clientX;\n      let currY = moveEvent.clientY;\n      pos.top = currY - startY + startTop;\n      pos.left = currX - startX + startLeft;\n      props.resize(props.uuid, pos);\n    }, 10)\n    let up = () => {\n      lastTime = new Date().getTime();\n      if( (lastTime - firstTime) > 200){\n        props.resize(props.uuid, pos);\n      }\n      document.removeEventListener('mousemove', move, true);\n      document.removeEventListener('mouseup', up, true);\n    }\n    document.addEventListener('mousemove', move, true);\n    document.addEventListener('mouseup', up, true);\n    return true;\n  }\n\n  function handleMouseDownOnPoint (point, e) {\n    let downEvent = e;\n    dispatch({type: 'uuid_change', uuid: props.uuid});\n    downEvent.stopPropagation();\n    downEvent.preventDefault();\n    const pos = {...props.defaultStyle};\n    let height = pos.height;\n    let width = pos.width;\n    let top = pos.top;\n    let left = pos.left;\n    let startX = downEvent.clientX;\n    let startY = downEvent.clientY;\n    let move = throttle(moveEvent => {\n      moveEvent.stopPropagation();\n      moveEvent.preventDefault();\n      let currX = moveEvent.clientX;\n      let currY = moveEvent.clientY;\n      let disY = currY - startY;\n      let disX = currX - startX;\n      let hasT = /t/.test(point);\n      let hasB = /b/.test(point);\n      let hasL = /l/.test(point);\n      let hasR = /r/.test(point);\n      let newHeight = +height + (hasT ? -disY : hasB ? disY : 0);\n      let newWidth = +width + (hasL ? -disX : hasR ? disX : 0);\n      pos.height = newHeight > 0 ? newHeight : 0;\n      pos.width = newWidth > 0 ? newWidth : 0;\n      pos.left = +left + (hasL ? disX : 0);\n      pos.top = +top + (hasT ? disY : 0);\n      props.resize(props.uuid, pos);\n    }, 10)\n    let up = () => {\n      props.resize(props.uuid, pos);\n      document.removeEventListener('mousemove', move, true);\n      document.removeEventListener('mouseup', up);\n    }\n    document.addEventListener('mousemove', move, true);\n    document.addEventListener('mouseup', up);\n  }\n\n  const shapeStyle = getCommonStyle(props.defaultStyle);\n\n  return (\n    <div \n      className={`EditorShape ${state.activeUUID === props.uuid ? \"active\" : \"\"}`} \n      onClick={(e) => handleTopWrapperClick(e)}\n      onMouseDown={(e) => handleMouseDownOnElement(e)}\n      style={shapeStyle}>\n      {\n        pointList.map(item => <div className=\"EditShapePoint\" onMouseDown={(e) => handleMouseDownOnPoint(item, e)} key={item} style={getPointStyle(item)} />)\n      }\n      { props.children }\n    </div>\n  );\n}\n\nexport default EditorShape;\n","import React, { useContext, useEffect } from 'react';\nimport './EditorPane.css';\nimport AppContext from '../../utils/context';\nimport EditorShape from '../EditorShape';\nimport { getPlugins } from '../../plugins';\n\nfunction EditorPane() {\n  const { state, dispatch } = useContext(AppContext);\n\n  function resize (uuid, pos) {\n    if (!pos) return;\n    const el = state.els.find(item => item.uuid === uuid);\n    if (!el) return;\n    el.commonStyle = {...pos};\n    dispatch({type: 'els_change', el});\n  }\n\n  useEffect(() => {\n    // Update the document title using the browser API\n    function handleDelete(e) {\n      e.preventDefault();\n      if (e.keyCode === 46 && !!state.activeUUID) {\n        dispatch({type: 'els_remove', uuid: state.activeUUID});\n        dispatch({type: 'uuid_change', uuid: ''});\n      }\n    }\n    document.addEventListener('keyup', handleDelete);\n    return function cleanup () {\n      document.removeEventListener('keyup', handleDelete);\n    }\n  });\n\n  return (\n    <div className=\"EditorPane\" onClick={() => dispatch({ type: 'uuid_change', uuid: '' })}>\n      <div className=\"EditorPaneInner\">\n        <div className=\"EditorPaneMain\">{ state.els.map(el => <EditorShape resize={resize} name={el.name} defaultStyle={el.commonStyle} uuid={el.uuid} key={el.uuid}>{getPlugins(el)}</EditorShape>) }</div>\n      </div>\n    </div>\n  );\n}\n\nexport default EditorPane;\n","import React, { useReducer } from 'react';\nimport './App.css';\nimport AppContext from '../../utils/context'\nimport AppReducer from '../../utils/reducer'\nimport Tools from '../../components/Tools'\nimport EditorPane from '../../components/EditorPane'\nimport logo from './logo.svg';\n\nfunction App() {\n  const [state, dispatch] = useReducer(AppReducer, { els: [], activeUUID: '', dragEl: null });\n  return (\n    <AppContext.Provider value={{\n      state,\n      dispatch\n    }}>\n      <div className=\"App\">\n        <header className=\"AppHeader\"><img className=\"AppLogo\" src={logo} alt=\"logo\" />ReactDemo</header>\n        <div className=\"AppBody\">\n          <Tools />\n          <EditorPane />\n        </div>\n      </div>\n    </AppContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './pages/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}