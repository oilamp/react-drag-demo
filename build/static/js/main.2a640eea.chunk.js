(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/text.ad0d6e3b.svg"},function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},,,,,function(e,t,n){e.exports=n(28)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),i=n.n(o),c=(n(20),n(12)),u=(n(21),Object(a.createContext)()),l=n(13),s=n(1);function d(e,t){switch(t.type){case"els_add":return Object(s.a)({},e,{els:[].concat(Object(l.a)(e.els),[t.el])});case"els_remove":return Object(s.a)({},e,{els:e.els.filter((function(e){return e.uuid!==t.uuid}))});case"els_change":var n=e.els.filter((function(e){return e.uuid!==t.el.uuid}));return n.push(t.el),Object(s.a)({},e,{els:n});case"els_clean":return Object(s.a)({},e,{els:[]});case"uuid_change":return Object(s.a)({},e,{activeUUID:t.uuid});case"drag_el_change":return Object(s.a)({},e,{dragEl:t.el});default:throw new Error}}n(22),n(23);function m(e){var t=Object(a.useContext)(u).dispatch,n=e.data;function o(t){t.preventDefault(),"EditorPaneMain"===t.target.className&&e.itemClick(e.data),document.removeEventListener("drop",o)}return document.addEventListener("dragover",(function(e){e.preventDefault()})),r.a.createElement("div",{className:"ComponentItem",draggable:"true",onDragStart:function(e){t({type:"drag_el_change",el:n.item}),document.addEventListener("drop",o)},onDragEnd:function(e){t({type:"drag_el_change",el:null})},onClick:function(){return e.itemClick(e.data)}},r.a.createElement("div",{className:"ComponentItemWrap"},r.a.createElement("img",{className:"ComponentIcon",src:n.icon,alt:"\u7ec4\u4ef6\u56fe\u6807"}),r.a.createElement("p",{className:"ComponentTitle"},n.title)))}var p=n(7),f=n(8),v=n(11),g=n(14),h={text:"\u6211\u662f\u4e00\u6bb5\u6587\u5b57",defaultStyle:{height:40}},b=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.config||h;return r.a.createElement("div",{className:"EdText EditorPlugin"},e.text)}}]),n}(r.a.Component);b.defaultPorps=h;var y={EdText:b};function E(e){return y[e]}var x=function(){var e=(new Date).getTime();return window.performance&&"function"===typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},w=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null===t||"object"!==typeof t)return t;var a=n.filter((function(e){return e.original===t}))[0];if(a)return a.copy;var r=Array.isArray(t)?[]:{};return n.push({original:t,copy:r}),Object.keys(t).forEach((function(a){r[a]=e(t[a],n)})),r};function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=null;return function(){if(!n){var a=[].slice.apply(arguments);e.apply(this,a),n=setTimeout((function(){n=null}),t)}}}var S=n(3),k={name:"",animations:[],commonStyle:{position:"absolute",width:960,height:30,top:200,left:0,rotate:0,paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0,marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,borderWidth:0,borderColor:"",borderStyle:"solid",borderRadius:0,boxShadow:"",fontSize:16,fontWeight:500,lineHeight:1.4,letterSpacing:0,textAlign:"center",color:"#000000",backgroundColor:"",backgroundImage:"",backgroundSize:"cover",opacity:1,zIndex:1},defaultPorps:{},propsValue:{},value:"",valueType:"String"};var O=n(9),C=[{name:"EdText",title:"\u6587\u5b57",icon:n.n(O).a}];var D=function(){var e=Object(a.useContext)(u),t=e.state,n=e.dispatch;function o(e){var a=function(e){var t=E(e);if(!t)return{};var n={},a=t.defaultPorps;for(var r in a)n[r]=a[r];return n}(e.name),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(S.cloneDeep)(e),a=n.valueType||"String",r={Sting:"",Array:[],Object:{},Boolean:!1,Number:0},o=Object(S.cloneDeep)(k),i=Object(s.a)({uuid:x()},o,{name:n.name,propsValue:w(n.needProps||{})});return i.commonStyle=Object(S.merge)(i.commonStyle,n.defaultStyle),i.commonStyle=Object(S.merge)(i.commonStyle,t),i.value=e.defaultValue||r[a],i.valueType=a,i.isForm=!!e.isForm,i}(Object(s.a)({},e,{needProps:a}),{zIndex:t.els.length+1});n({type:"uuid_change",uuid:r.uuid}),n({type:"els_add",el:r})}return r.a.createElement("div",{className:"Tools"},r.a.createElement("h4",null,"\u7ec4\u4ef6\u5e93"),r.a.createElement("div",{className:"ComponentList"},C.map((function(e){return r.a.createElement(m,{key:e.name,itemClick:o,data:e})}))))},L=(n(26),n(27),["lt","rt","lb","rb","l","r","t","b"]),N={t:"n",b:"s",l:"w",r:"e"};var T=function(e){var t=Object(a.useContext)(u),n=t.state,o=t.dispatch;function i(t){var n=e.defaultStyle,a=n.height,r=n.width,o=/t/.test(t),i=/b/.test(t),c=/l/.test(t),u=/r/.test(t),l=0,s=0;return 2===t.length?(l=c?0:r,s=o?0:a):((o||i)&&(l=r/2,s=o?0:a),(c||u)&&(l=c?0:r,s=a/2-5)),{marginLeft:c||u?"-5px":0,marginTop:o||i?"-5px":0,left:"".concat(l,"px"),top:"".concat(s,"px"),cursor:t.split("").reverse().map((function(e){return N[e]})).join("")+"-resize"}}var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=["width","height","top","left","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","borderWidth","fontSize","borderRadius","letterSpacing"],a={};for(var r in e)n.includes(r)?a[r]=e[r]*t+"px":a[r]=e[r];return a.transform="rotate(".concat(a.rotate,"deg)"),a.backgroundImage=a.backgroundImage?"url(".concat(a.backgroundImage,")"):"",a}(e.defaultStyle);return r.a.createElement("div",{className:"EditorShape ".concat(n.activeUUID===e.uuid?"active":""),onClick:function(e){return function(e){e.stopPropagation(),e.preventDefault()}(e)},onMouseDown:function(t){return function(t){o({type:"uuid_change",uuid:e.uuid});var n,a=Object(s.a)({},e.defaultStyle),r=t.clientY,i=t.clientX,c=a.top,u=a.left;n=(new Date).getTime();var l=j((function(t){t.stopPropagation(),t.preventDefault();var n=t.clientX,o=t.clientY;a.top=o-r+c,a.left=n-i+u,e.resize(e.uuid,a)}),10);return document.addEventListener("mousemove",l,!0),document.addEventListener("mouseup",(function t(){(new Date).getTime()-n>200&&e.resize(e.uuid,a),document.removeEventListener("mousemove",l,!0),document.removeEventListener("mouseup",t,!0)}),!0),!0}(t)},style:c},L.map((function(t){return r.a.createElement("div",{className:"EditShapePoint",onMouseDown:function(n){return function(t,n){var a=n;o({type:"uuid_change",uuid:e.uuid}),a.stopPropagation(),a.preventDefault();var r=Object(s.a)({},e.defaultStyle),i=r.height,c=r.width,u=r.top,l=r.left,d=a.clientX,m=a.clientY,p=j((function(n){n.stopPropagation(),n.preventDefault();var a=n.clientX,o=n.clientY-m,s=a-d,p=/t/.test(t),f=/b/.test(t),v=/l/.test(t),g=/r/.test(t),h=+i+(p?-o:f?o:0),b=+c+(v?-s:g?s:0);r.height=h>0?h:0,r.width=b>0?b:0,r.left=+l+(v?s:0),r.top=+u+(p?o:0),e.resize(e.uuid,r)}),10);document.addEventListener("mousemove",p,!0),document.addEventListener("mouseup",(function t(){e.resize(e.uuid,r),document.removeEventListener("mousemove",p,!0),document.removeEventListener("mouseup",t)}))}(t,n)},key:t,style:i(t)})})),e.children)};var _=function(){var e=Object(a.useContext)(u),t=e.state,n=e.dispatch;function o(e,a){if(a){var r=t.els.find((function(t){return t.uuid===e}));r&&(r.commonStyle=Object(s.a)({},a),n({type:"els_change",el:r}))}}return Object(a.useEffect)((function(){function e(e){e.preventDefault(),46===e.keyCode&&t.activeUUID&&(n({type:"els_remove",uuid:t.activeUUID}),n({type:"uuid_change",uuid:""}))}return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}})),r.a.createElement("div",{className:"EditorPane",onClick:function(){return n({type:"uuid_change",uuid:""})}},r.a.createElement("div",{className:"EditorPaneInner"},r.a.createElement("div",{className:"EditorPaneMain"},t.els.map((function(e){return r.a.createElement(T,{resize:o,name:e.name,defaultStyle:e.commonStyle,uuid:e.uuid,key:e.uuid},function(e){var t=E(e.name);return r.a.createElement(t,{config:e.propsValue})}(e))})))))},P=n(10),I=n.n(P);var A=function(){var e=Object(a.useReducer)(d,{els:[],activeUUID:"",dragEl:null}),t=Object(c.a)(e,2),n=t[0],o=t[1];return r.a.createElement(u.Provider,{value:{state:n,dispatch:o}},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"AppHeader"},r.a.createElement("img",{className:"AppLogo",src:I.a,alt:"logo"}),"ReactDemo"),r.a.createElement("div",{className:"AppBody"},r.a.createElement(D,null),r.a.createElement(_,null))))},U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");U?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):W(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):W(t,e)}))}}()}],[[15,1,2]]]);
//# sourceMappingURL=main.2a640eea.chunk.js.map